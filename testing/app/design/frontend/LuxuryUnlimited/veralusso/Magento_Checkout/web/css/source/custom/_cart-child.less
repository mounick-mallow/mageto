//
//  Common
//  _____________________________________________

& when (@media-common = true) {
    .cart-donate-block {
        clear: both;
    }

    .cart-summary {
        background-color: @theme__secondary--color-100;
        padding: 32px;
        margin-bottom: 80px;
        top: 0 !important;

        > .title {
            .lib-font-size(18);
            .lib-line-height(25);
            color: @theme__primary--color;
            font-weight: @font-weight__semibold;
            border-bottom: 1px solid @theme__primary--color-200;
            margin: 0 0 16px;
            padding-bottom: 16px;
        }

        .action.primary.checkout {
            width: 100%;
            height: 50px;
            .lib-font-size(16);
            .lib-line-height(24);
            font-weight: @font-weight__bold;
        }

        .block {
            &.shipping {
                display: none; // remove estimated shipping and tax
            }

            &.discount {
                margin-bottom: 20px;

                .content {
                    padding: 0;
                }

                .fieldset.coupon {
                    &:extend(.abs-add-clearfix all);
                    position: relative;

                    .field {
                        margin: 0;
                        width: 73%;

                        .input-text {
                            height: 48px;
                            background-color: @custom__color-white;
                            border-radius: 12px;
                            padding-right: @indent__xs;
                        }
                    }
                }

                .actions-toolbar {
                    width: 96px;
                    position: absolute;
                    right: 0;
                    top: 0;

                    > .primary {
                        .action.primary {
                            .lib-font-size(16);
                            .lib-line-height(22);
                            font-weight: @font-weight__bold;
                            margin: 0;
                            padding-left: 5px;
                            padding-right: 5px;
                            background-color: @custom__color-black;
                            height: 48px;
                            border: 0;
                            border-radius: 12px;
                            width: 96px;
                        }
                    }
                }
            }
        }

        .cart-totals {
            border-top: 0;
            padding-top: 0;
            margin-bottom: 30px;

            tbody {
                .mark,
                .amount {
                    .lib-font-size(16);
                    .lib-line-height(22);
                    padding-top: 7px;
                    padding-bottom: 7px;
                    color: @custom__color-gray1;
                }

                > .grand {
                    .mark,
                    .amount {
                        border-top: 1px dashed @custom__color-gray1;
                        color: @custom__color-black;
                        padding-top: 24px;

                        strong {
                            font-weight: @font-weight__regular;
                            padding: 0;
                        }
                    }

                    .amount {
                        strong {
                            font-weight: @font-weight__bold;
                        }
                    }
                }
            }
        }

        .checkout-methods-items {
            a.multicheckout {
                .lib-font-size(14);
                .lib-line-height(23);
                font-weight: @font-weight__bold;
                text-decoration: underline;
                text-transform: uppercase;
                color: @theme__primary--color;
            }
        }

        .view-coupon-list-link {
            text-align: right;

            .view-coupon {
                .lib-font-size(14);
            }
        }
    }

    .cart {
        &.table-wrapper {
            .cart {
                thead {
                    border: 1px solid @theme__primary--color-200;
                    border-bottom: 0;
                    border-radius: 10px 10px 0 0;
                    padding: 15px 20px;

                    tr {
                        th.col {
                            border-bottom: 0;
                            color: @theme__primary--color;
                            .lib-font-size(16);
                            .lib-line-height(20);
                            font-weight: @font-weight__semibold;
                        }
                    }
                }

                > .item {
                    border: 1px solid @theme__primary--color-200;
                }
            }

            .col {
                &.item {
                    .product-item-photo {
                        .product-image-wrapper {
                            overflow: hidden;
                        }
                    }

                    .product-brand-name {
                        display: none; // no need brands name in brands labels
                    }

                    .product-item-name {
                        .lib-font-size(14);
                        .lib-line-height(22);
                        font-weight: @font-weight__semibold;
                        margin: 0;

                        > a {
                            color: @custom__color-black;

                            &:hover {
                                text-decoration: none;
                            }
                        }

                        + .item-options {
                            margin-top: 5px;
                        }
                    }
                }

                &.price,
                &.subtotal {
                    vertical-align: middle;

                    .price-excluding-tax {
                        .lib-line-height(24);

                        .price {
                            .lib-font-size(16);
                            .lib-line-height(24);
                            color: @custom__color-black;
                            font-weight: @font-weight__heavier;
                        }
                    }
                }

                &.qty {
                    vertical-align: middle;

                    .field.qty {
                        position: relative;
                        width: 88px;
                        padding: 0 25px;
                        height: 30px;

                        .input-text {
                            border: 0;
                            margin: 0;
                            height: 46px;
                            width: 30px;
                            background-color: @custom__color-white;
                            border-radius: 50%;
                            .lib-font-size(16);
                            font-weight: @font-weight__semibold;
                            color: @custom__color-black;
                            padding: 0 2px;
                            position: relative;
                            z-index: 2;
                        }

                        .qty-changer {
                            display: block;

                            a {
                                position: absolute;
                                top: 9px;
                                width: 20px;
                                height: 20px;
                                background-color: transparent;
                                z-index: 1;

                                span {
                                    display: none;
                                }

                                &:hover {
                                    text-decoration: none;
                                }

                                &:after {
                                    font-family: @icomoon-font-family;
                                    .lib-font-size(18);
                                    .lib-line-height(24);
                                    color: @custom__color-gray1;
                                    display: block;
                                    width: 20px;
                                    height: 20px;
                                    text-align: center;
                                }

                                &.qty-dec {
                                    left: 0;
                                    padding-right: 5px;

                                    &:after {
                                        content: @icon-minus;
                                    }
                                }

                                &.qty-inc {
                                    right: 0;
                                    padding-left: 5px;

                                    &:after {
                                        content: @icon-plus;
                                    }
                                }
                            }
                        }
                    }
                }
            }

            .actions-toolbar {
                position: absolute;
                right: 13px;

                .gift-options-cart-item {
                    display: none;
                }

                .action {
                    &.action-delete,
                    &.action-edit,
                    &.towishlist {
                        &:before {
                            width: 24px;
                            height: 24px;
                            color: @theme__primary--color;
                        }
                    }

                    &.action-delete {
                        &:before {
                            content: @icon-close;
                        }
                    }
                }
            }

            .item-options {
                dt,
                dd {
                    .lib-font-size(14);
                    .lib-line-height(16);
                    font-weight: @font-weight__semibold;
                    color: @custom__color-gray1;
                }

                dt {
                    margin: 0 3px 3px 0;
                }

                dd {
                    margin: 0 0 3px;
                }
            }
        }
    }

    .cart-container {
        .form-cart {
            .actions.main {
                .action {
                    .lib-font-size(16);
                    .lib-line-height(25);
                    font-weight: @font-weight__bold;
                    color: @theme__primary--color;
                    text-decoration: underline;
                    text-transform: uppercase;
                }
            }

            .cart.main {
                display: none;
            }
        }
    }

    .block {
        &.crosssell {
            clear: both;

            .block-title {
                margin-bottom: 40px;
                display: block;

                strong {
                    .lib-font-size(18);
                    .lib-line-height(27);
                    font-weight: @font-weight__semibold;
                    color: @theme__primary--color;
                    text-transform: uppercase;
                    padding: 0;
                }
            }
        }
    }

    .block {
        &.crosssell {
            margin-top: 100px;

            .products {
                margin: 0;
            }

            .products-grid {
                .product-items {
                    margin: 0 -15px;

                    .product-item {
                        width: 100%/4;
                    }
                }

                .owl-carousel {
                    position: relative;

                    &.product-items {
                        margin: 0;
                    }

                    .owl-item {
                        .product-item {
                            width: 100%;
                            padding: 0;
                            margin: 0;
                        }
                    }

                    .owl-stage-outer {
                        position: relative;
                        overflow: hidden;
                        -webkit-transform: translate3d(0, 0, 0);
                    }

                    .owl-item {
                        float: left;
                        -webkit-backface-visibility: hidden;
                        -webkit-touch-callout: none;
                    }

                    .owl-controls {
                        position: static;

                        .owl-nav {
                            .owl-prev,
                            .owl-next {
                                position: absolute;
                                width: 34px;
                                height: 34px;
                                background-color: @theme__secondary--color-200;
                                border-radius: 4px;
                                color: @theme__primary--color;
                                top: -100px;
                                cursor: pointer;

                                &:before {
                                    font-family: @icomoon-font-family;
                                    .lib-font-size(20);
                                    .lib-line-height(34);
                                    display: block;
                                    width: 34px;
                                    height: 34px;
                                    text-align: center;
                                    color: @theme__primary--color;
                                    position: static;
                                    background: none;
                                    -webkit-mask-image: none;
                                    mask-image: none;
                                }

                                &:after {
                                    display: none;
                                }

                                &:hover {
                                    color: @theme__secondary--color;
                                }
                            }

                            .owl-prev {
                                right: 50px;
                                left: auto;

                                &:before {
                                    content: @icon-left;
                                }
                            }

                            .owl-next {
                                right: 0;
                                left: auto;

                                &:before {
                                    content: @icon-right;
                                }
                            }
                        }
                    }
                }
            }
        }
    }

    body.checkout-cart-index {
        .page-title-wrapper {
            display: block;
        }
    }
}

//
//  Desktop
//  _____________________________________________

.media-width(@extremum, @break)
    when
    (@extremum = 'min')
    and
    (@break = @screen__m) {
    .page-main {
        .cart-summary {
            .block {
                &.discount {
                    margin-bottom: 20px;
                }
            }
        }
    }

    .cart {
        &.table-wrapper {
            .cart {
                thead {
                    tr {
                        th.col {
                            &.subtotal {
                                padding-right: 92px;
                            }

                            &.action {
                                display: none;
                            }
                        }
                    }
                }
            }

            .col {
                &.item,
                &.price,
                &.qty,
                &.subtotal {
                    padding-top: 30px;
                    padding-bottom: 30px;
                }

                &.subtotal {
                    padding-right: 92px;
                }
            }

            .item {
                .col {
                    &.item {
                        padding: 20px 8px 20px 20px;
                    }
                }
            }

            .product-item-details {
                padding: 0;
                vertical-align: middle;
            }

            .product-item-photo {
                padding-right: 16px;
            }

            .actions-toolbar {
                top: 50%;
                margin-top: -12px;
            }
        }
    }

    .cart-container {
        .form-cart {
            margin-bottom: 100px;

            .actions.main {
                text-align: left;
            }
        }
    }
}

//
//  Mobile
//  _____________________________________________

.media-width(@extremum, @break)
    when
    (@extremum = 'max')
    and
    (@break = @screen__m) {
    .cart-container {
        .lib-vendor-prefix-display(flex);
        flex-wrap: wrap;

        .form-cart {
            order: 1;
            width: 100%;
        }

        .cart-summary {
            order: 2;
            width: 100%;
            margin-bottom: 50px;

            .cart-totals {
                padding: 0;
            }

            .block.discount {
                padding: 0;
            }
        }

        .cart-donate-block {
            order: 3;
        }

        .block.crosssell {
            order: 4;
            width: 100%;
            margin-top: 50px;
        }
    }

    .checkout-cart-index {
        .cart {
            &.table-wrapper {
                border-top: 0;

                .col {
                    &.price {
                        display: none;
                        padding-top: 34px;
                    }

                    &.subtotal[data-th],
                    &.price[data-th] {
                        &:before {
                            display: none;
                        }
                    }

                    &.qty[data-th] {
                        &::before {
                            padding-top: 12px;
                            padding-bottom: 0;
                        }
                    }
                }

                .item {
                    .col {
                        &.item {
                            padding: 30px 0 0;

                            .product-image-container {
                                width: 50px !important;
                            }
                        }

                        &.qty {
                            padding-left: 0;
                        }

                        &.subtotal {
                            padding-top: 34px;
                        }
                    }
                }

                .actions-toolbar {
                    position: absolute;
                    right: 0;
                    bottom: 42px;

                    .action {
                        &.action-edit {
                            display: block;
                        }

                        &.action-delete {
                            &:before {
                                width: 32px;
                                height: 32px;
                                .lib-font-size(20);
                                .lib-line-height(24);
                                display: block;
                            }
                        }
                    }
                }

                .product-item-photo {
                    display: table-cell;
                    padding-right: 20px;
                    position: static;
                    vertical-align: middle;
                }

                .product-item-details {
                    display: table-cell;
                    vertical-align: middle;
                    white-space: normal;
                    width: 99%;
                }
            }
        }
    }
}

.media-width(@extremum, @break)
    when
    (@extremum = 'max')
    and
    (@break = @screen__xs) {
    .checkout-cart-index {
        .cart {
            &.table-wrapper {
                .item {
                    .col {
                        &.qty {
                            .lib-vendor-prefix-display(flex);
                            width: 59%;
                            .lib-css(justify-content, center, @_prefix: 1);
                            .lib-css(align-items, center, @_prefix: 1);
                            gap: @indent__s;
                        }
                    }
                }
            }
        }
    }

    .cart {
        &.table-wrapper {
            .cart {
                thead {
                    tr {
                        th.col {
                            display: none;
                        }
                    }
                }

                .cart.item {
                    border: 0;
                    border-bottom: 1px solid @theme__secondary--color-200;

                    &:last-child {
                        border: 0;
                    }
                }
            }
        }
    }
}
